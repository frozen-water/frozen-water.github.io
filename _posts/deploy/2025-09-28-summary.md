---
layout: post
title: 2025-09-28-ë°°í¬ ìë™í™” ì •ë¦¬
date: 2025-09-28 18:44:49 +0900
categories: [Summary]
tags: [Kubernetes,ArgoCD,Kafka,Github Actions]
---

### ğŸ“– ì˜¤ëŠ˜ ê³µë¶€í•œ ê²ƒ ì •ë¦¬



### 1. ArgoCD ë™ì‘ ë°©ì‹

- ArgoCDëŠ” **DockerHub ìµœì‹  ìƒíƒœë¥¼ ë³´ì§€ ì•ŠìŒ**

- GitOps ì›ì¹™ â†’ Git repo ì•ˆì˜ values.yaml `image.tag` ë§Œ ì‹ ë¢°

- ë”°ë¼ì„œ GitHub Actionsì—ì„œ:

1. Docker image ë¹Œë“œ & push

2. manifest repo values.yaml ì˜ tag ì—…ë°ì´íŠ¸ & push

3. ArgoCD sync



---



### 2. GitHub Actions & PAT

- `GITHUB_TOKEN`ì€ **í˜„ì¬ repo**ë§Œ ì“°ëŠ” ìš©ë„

- ë‹¤ë¥¸ repo push í•˜ë ¤ë©´ **PAT (Personal Access Token)** í•„ìš”

- ê¶Œí•œ: `repo`, `workflow`, `write:packages` ì •ë„ ì²´í¬



---



### 3. Kafka in Kubernetes

- Bitnami Kafka Helm chartëŠ” ê¸°ë³¸ì ìœ¼ë¡œ PVCë¥¼ ìƒì„±

- PVC ë‚¨ì•„ ìˆìœ¼ë©´ KRaft ì´ˆê¸°í™” ì‹¤íŒ¨ â†’ CrashLoopBackOff

- í•´ê²°: Kafka ì¬ì„¤ì¹˜ ì „ `kubectl delete pvc` ë¡œ ì •ë¦¬



---



### 4. Spring Kafka Consumer ë™ì‘

- `@KafkaListener` â†’ group-id ë¡œ offset ê´€ë¦¬

- ê¸°ì¡´ consumer group ì€ offset ì €ì¥ â†’ ì´ì „ ë©”ì‹œì§€ ì•ˆ ì½ìŒ

- `auto-offset-reset: earliest` ë„ group ìˆìœ¼ë©´ ì ìš© ì•ˆ ë¨

- **í…ŒìŠ¤íŠ¸ íŒ**: group-id ë°”ê¿”ì£¼ë©´ ì²˜ìŒë¶€í„° consume ê°€ëŠ¥



---



### 5. Minikube ë„¤íŠ¸ì›Œí¬

- `svc.cluster.local` â†’ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ Pod ê°„ í†µì‹ 

- `minikube service ... --url` â†’ ë¡œì»¬ PCì—ì„œ ì ‘ì†í•  ë•Œ ì‚¬ìš©



---



### âœ… í•µì‹¬ êµí›ˆ

1. GitOps = Git repoê°€ ì§„ì§œ ì†ŒìŠ¤, DockerHub latestëŠ” ì˜ë¯¸ ì—†ìŒ

2. Kafka PVCëŠ” ì¬ì„¤ì¹˜ ì „ì— ê¼­ ì •ë¦¬

3. ConsumerëŠ” group-id ë”°ë¼ offset ë‹¤ë¥´ê²Œ ë™ì‘

4. ì™¸ë¶€ ì ‘ê·¼ vs ë‚´ë¶€ ì ‘ê·¼ ì£¼ì†Œ êµ¬ë¶„
